# 🏔️ KNomad 점진적 개선 계획

현재 상태: Next.js 14 + Tailwind + shadcn/ui로 구축된 노마드 도시 추천 플랫폼

---

## Phase 1: 핵심 상태 관리 & 필터링 시스템 구축

### 📋 이번 단계 오버뷰
현재 UI는 렌더링만 되고 기능이 동작하지 않습니다. 가짜 데이터를 기반으로 필터링, 정렬, 검색 기능을 클라이언트 상태로 구현합니다. React Context를 사용하여 앱 전체에서 필터 상태를 공유하고 관리합니다.

**주요 구현:**
- ✅ 필터 상태 관리 (Context API)
- ✅ 실시간 필터링 로직 (예산, 지역, 날씨, 교통, 환경)
- ✅ 정렬 기능 (추천순, 가격, 인터넷 속도, 공기질, 인기도)
- ✅ 검색 기능 (도시명)
- ✅ UI 인터랙션 (드롭다운, 슬라이더)

### ✅ 수정/개선해야 하는 기능

- ✅ `FilterContext` 생성 (필터 상태 관리)
- ✅ `FilterSortBar` 컴포넌트 기능 구현
  - ✅ 예산 필터 (슬라이더)
  - ✅ 지역 필터 (멀티 선택)
  - ✅ 날씨 필터 (온도 범위 슬라이더)
  - ✅ 교통 필터 (지하철, KTX 체크박스)
  - ✅ 환경 필터 (공기질 선택)
  - ✅ 정렬 기능 (6가지 정렬 옵션)
  - ✅ "필터 초기화" 버튼 기능
- ✅ `Sidebar` 컴포넌트 기능 구현
  - ✅ 지역별 필터 클릭 시 동작
  - ✅ 추천 도시 클릭 시 필터링
  - ✅ 추천 카테고리 클릭 시 필터링
- ✅ `CityGrid` 컴포넌트 개선
  - ✅ Context에서 필터된 데이터 가져오기
  - ✅ 필터 결과에 따른 동적 렌더링
  - ✅ "더 보기" 페이지네이션 기본 구조
- ✅ `Header` 검색창 기능
  - ✅ 도시명 검색 기능

### 🔍 검증/확인해야 하는 기능

- ✅ 예산 필터: 최소/최대 값으로 도시 필터링 가능
- ✅ 지역 필터: 여러 지역 동시 선택 가능
- ✅ 날씨 필터: 온도 범위로 도시 필터링 가능
- ✅ 교통 필터: 지하철/KTX 선택에 따라 필터링됨
- ✅ 환경 필터: 공기질 선택에 따라 필터링됨
- ✅ 정렬 기능: 6가지 정렬 옵션 모두 작동 확인
- ✅ 필터 초기화: 모든 필터가 초기값으로 리셋됨
- ✅ 검색 기능: 도시명으로 실시간 검색 가능
- ✅ 상태 동기화: Sidebar 필터와 FilterSortBar 필터 동기화
- ✅ 결과 표시: "총 X개 도시 표시 중" 정확하게 업데이트

---

## Phase 2: 상세 페이지 & 도시 정보 시스템

### 📋 이번 단계 오버뷰
각 도시의 상세 정보를 보여주는 동적 페이지를 구현합니다. 도시 카드의 "자세히 보기" 버튼과 사이드바 도시 링크를 통해 `/cities/[slug]` 페이지로 이동합니다. 상세 정보, 리뷰 요약, 관련 도시 추천 등을 표시합니다.

**주요 구현:**
- ☐ 동적 라우팅 페이지 (`/cities/[slug]`)
- ☐ 도시 상세 정보 섹션
- ☐ 평가 및 리뷰 요약 (가짜 데이터)
- ☐ 주요 수치 시각화
- ☐ 관련 도시 추천 (유사 필터링)

### ✅ 수정/개선해야 하는 기능

- ☐ `/cities/[slug]/page.tsx` 생성
  - ☐ slug 기반 도시 데이터 로드
  - ☐ 404 처리 (존재하지 않는 도시)
- ☐ 도시 상세 페이지 레이아웃
  - ☐ 히어로 이미지
  - ☐ 도시 기본 정보 (이름, 지역, 랭킹)
  - ☐ 평점 및 리뷰 요약
- ☐ 상세 정보 섹션
  - ☐ 생활비 상세 (월생활비, 월세)
  - ☐ 인프라 정보 (인터넷, 카페, 코워킹)
  - ☐ 환경 정보 (날씨, 미세먼지, 대기질)
  - ☐ 교통 정보 (지하철, KTX)
- ☐ 가짜 리뷰 데이터 생성 (`src/data/reviews.ts`)
- ☐ 리뷰 섹션 컴포넌트
- ☐ 관련 도시 추천 (유사 필터링 로직)
- ☐ CityCard "자세히 보기" 버튼 Link 연결
- ☐ Sidebar 도시 클릭 시 상세 페이지 이동

### 🔍 검증/확인해야 하는 기능

- ☐ 각 도시의 상세 페이지 정상 로드
- ☐ 존재하지 않는 도시 접근 시 404 표시
- ☐ 이미지 로드 및 레이아웃 정상
- ☐ 모든 도시 정보가 정확하게 표시
- ☐ 리뷰 섹션이 3개 이상의 가짜 리뷰 표시
- ☐ 관련 도시 추천이 최소 3개 도시 표시
- ☐ 뒤로가기 버튼 정상 동작
- ☐ 반응형 레이아웃 확인 (모바일, 태블릿, 데스크톱)

---

## Phase 3: 즐겨찾기 & 비교 기능 구현

### 📋 이번 단계 오버뷰
사용자가 선호하는 도시를 즐겨찾기할 수 있도록 하고, 여러 도시를 비교할 수 있는 기능을 구현합니다. localStorage를 사용하여 클라이언트 측에 즐겨찾기 목록을 저장합니다.

**주요 구현:**
- ☐ 즐겨찾기 관리 (Context + localStorage)
- ☐ 도시 카드의 하트 아이콘 기능
- ☐ 즐겨찾기 페이지 (`/favorites`)
- ☐ 도시 비교 기능 (`/compare`)
- ☐ 비교 테이블 컴포넌트

### ✅ 수정/개선해야 하는 기능

- ☐ `FavoritesContext` 생성 (localStorage 연동)
- ☐ CityCard 하트 아이콘 클릭 기능
  - ☐ 클릭 시 즐겨찾기 추가/제거
  - ☐ 하트 아이콘 상태 변경 (채우기/비우기)
  - ☐ localStorage에 저장
- ☐ `/favorites` 페이지 생성
  - ☐ 즐겨찾기 도시 목록 표시
  - ☐ 빈 상태 메시지
  - ☐ 즐겨찾기 제거 기능
- ☐ `/compare` 페이지 생성
  - ☐ 도시 선택 드롭다운 (최대 4개)
  - ☐ 비교 테이블 (주요 지표 비교)
  - ☐ 비교 대상 추가/제거 기능
  - ☐ 가로 스크롤 테이블 (모바일 대응)
- ☐ Header 네비게이션에 "즐겨찾기" 링크 추가

### 🔍 검증/확인해야 하는 기능

- ☐ 하트 아이콘 클릭 시 즐겨찾기 추가됨
- ☐ 페이지 새로고침 후에도 즐겨찾기 유지
- ☐ 즐겨찾기 페이지에서 모든 추가된 도시 표시
- ☐ 즐겨찾기 제거 시 목록에서 삭제됨
- ☐ 비교 페이지에서 도시 선택 가능
- ☐ 비교 테이블이 모든 주요 지표 표시
- ☐ 비교 대상 4개 제한 동작
- ☐ 모바일에서 테이블 가로 스크롤 가능
- ☐ 즐겨찾기가 비어있을 때 빈 상태 화면 표시

---

## Phase 4: 사용자 리뷰 & 평가 시스템

### 📋 이번 단계 오버뷰
사용자가 도시에 대한 리뷰를 작성하고 평점을 매길 수 있도록 합니다. 로그인한 사용자만 리뷰 작성 가능하며, 가짜 데이터는 localStorage에 저장됩니다 (실제로는 나중에 DB로 전환).

**주요 구현:**
- ☐ 리뷰 데이터 구조 및 가짜 데이터
- ☐ 도시 상세 페이지의 리뷰 섹션 확장
- ☐ 리뷰 작성 폼 (모달 또는 별도 섹션)
- ☐ 평점 상세 분석 (5점 분포)
- ☐ 리뷰 필터링 & 정렬

### ✅ 수정/개선해야 하는 기능

- ☐ 리뷰 데이터 타입 정의 (`src/lib/types.ts` 확장)
- ☐ 가짜 리뷰 데이터 생성 (`src/data/reviews.ts` 확장)
- ☐ `ReviewsContext` 생성 (localStorage 연동)
- ☐ 도시 상세 페이지의 리뷰 섹션 확장
  - ☐ 평점 분포 시각화 (별점별 개수)
  - ☐ 평균 평점 & 리뷰 수
  - ☐ 추천도 (%)
- ☐ 리뷰 목록 컴포넌트
  - ☐ 각 리뷰 카드 (평점, 제목, 내용, 작성자, 날짜)
  - ☐ 도움이 됨/도움이 안됨 버튼
  - ☐ 최신순/유용순 정렬
- ☐ "리뷰 작성" 버튼 & 모달 폼
  - ☐ 별점 선택 (1-5)
  - ☐ 제목 입력
  - ☐ 내용 입력
  - ☐ 가짜 사용자명으로 저장
  - ☐ localStorage에 저장
- ☐ 로그인 유도 (미로그인 시 리뷰 작성 불가)

### 🔍 검증/확인해야 하는 기능

- ☐ 리뷰 목록이 정확하게 표시됨
- ☐ 평점 분포 시각화가 정확함
- ☐ 리뷰 정렬 기능 동작 (최신순, 유용순)
- ☐ 리뷰 작성 폼이 정상 렌더링됨
- ☐ 리뷰 제출 후 목록에 추가됨
- ☐ 새로고침 후 작성된 리뷰 유지
- ☐ 평균 평점이 자동으로 업데이트됨
- ☐ 로그인 안 한 상태에서 "로그인 필요" 메시지 표시

---

## Phase 5: 고급 필터 & 검색 최적화

### 📋 이번 단계 오버뷰
UI에 표시된 고급 필터 옵션들을 모두 기능화하고, 검색 성능과 사용자 경험을 최적화합니다. 여러 필터의 조합이 자연스럽게 작동하도록 개선합니다.

**주요 구현:**
- ☐ 상세 필터 모달 페이지
- ☐ 필터 프리셋 저장 (자주 사용하는 필터 조합)
- ☐ 검색 제안 (오토컴플릿)
- ☐ 필터 카운트 표시 (몇 개 필터 적용 중)
- ☐ 필터 적용 통계

### ✅ 수정/개선해야 하는 기능

- ☐ "상세필터" 버튼 기능
  - ☐ 상세 필터 모달/페이지 구현
  - ☐ 모든 필터 옵션을 한 곳에서 관리
  - ☐ "적용" 및 "취소" 버튼
- ☐ 필터 프리셋 기능
  - ☐ "저렴한 도시" 프리셋
  - ☐ "조용한 도시" 프리셋
  - ☐ "해변 도시" 프리셋
  - ☐ "산악 도시" 프리셋
  - ☐ 커스텀 프리셋 저장 기능
- ☐ 검색창 오토컴플릿
  - ☐ 입력 시 도시명 제안
  - ☐ 빠른 선택
- ☐ 적용된 필터 카운트 표시
  - ☐ FilterSortBar 옆에 "X개 필터 적용 중" 표시
- ☐ 필터 적용 통계
  - ☐ "총 X개 도시 표시 중" 더 상세하게
  - ☐ 필터 적용 전후 비교

### 🔍 검증/확인해야 하는 기능

- ☐ 상세 필터 모달이 정상 표시됨
- ☐ 상세 필터에서 모든 옵션 접근 가능
- ☐ 필터 프리셋 클릭 시 올바른 필터 적용
- ☐ 오토컴플릿이 정확한 도시명 제안
- ☐ 필터 카운트가 정확하게 표시
- ☐ 여러 필터의 조합이 올바르게 작동
- ☐ 필터 통계가 정확함

---

## Phase 6: 사용자 개인화 & 추천 시스템

### 📋 이번 단계 오버뷰
사용자의 행동 데이터(조회 기록, 즐겨찾기, 리뷰)를 기반으로 맞춤 추천을 제공합니다. 사용자 프로필 페이지도 추가하여 개인화된 경험을 만듭니다.

**주요 구현:**
- ☐ 조회 기록 추적 (최근 본 도시)
- ☐ 맞춤 추천 알고리즘 (유사 도시)
- ☐ 사용자 프로필 페이지 (`/profile`)
- ☐ 개인화된 홈 섹션 (로그인 사용자)

### ✅ 수정/개선해야 하는 기능

- ☐ 조회 기록 시스템
  - ☐ 도시 상세 페이지 방문 시 기록 저장 (localStorage)
  - ☐ 최근 본 도시 목록 (최대 10개)
- ☐ 맞춤 추천 로직
  - ☐ 유사한 평점의 도시
  - ☐ 유사한 가격대의 도시
  - ☐ 유사한 태그의 도시
  - ☐ 추천 스코어 계산
- ☐ `/profile` 페이지 생성
  - ☐ 사용자 정보 (가짜 이메일)
  - ☐ 내 즐겨찾기 목록 (미리보기)
  - ☐ 내 리뷰 목록 (미리보기)
  - ☐ 조회 기록
  - ☐ 활동 통계
- ☐ 홈 페이지 개인화
  - ☐ 로그인 사용자: 맞춤 추천 섹션
  - ☐ 최근 본 도시 섹션
  - ☐ "당신을 위한 추천" 섹션
- ☐ Sidebar 최근 본 도시 동적 업데이트

### 🔍 검증/확인해야 하는 기능

- ☐ 도시 방문 시 조회 기록에 추가됨
- ☐ 최근 본 도시가 최대 10개로 제한
- ☐ 프로필 페이지에서 조회 기록 확인 가능
- ☐ 맞춤 추천이 논리적이고 정확함
- ☐ 즐겨찾기 목록이 프로필에 표시
- ☐ 리뷰 목록이 프로필에 표시
- ☐ 활동 통계가 정확함
- ☐ 홈 페이지 개인화 섹션이 표시

---

## Phase 7: 모바일 최적화 & 접근성 개선

### 📋 이번 단계 오버뷰
모바일 기기에서의 사용성을 크게 개선하고, WCAG 웹 접근성 표준을 준수합니다. 반응형 디자인과 터치 친화적인 UI를 구현합니다.

**주요 구현:**
- ☐ 모바일 네비게이션 (햄버거 메뉴)
- ☐ 터치 최적화된 버튼 크기
- ☐ 모바일 필터링 UX 개선
- ☐ 접근성 개선 (aria-labels, semantic HTML)
- ☐ 다크 모드 전체 지원

### ✅ 수정/개선해야 하는 기능

- ☐ 모바일 네비게이션 구현
  - ☐ Header의 햄버거 메뉴 기능화
  - ☐ 모바일 메뉴 슬라이드/모달
  - ☐ 모바일에서 숨겨진 네비게이션 표시
- ☐ 터치 최적화
  - ☐ 버튼 최소 높이 44px
  - ☐ 터치 타겟 간격 충분
  - ☐ 스와이프 제스처 (카루셀)
- ☐ 모바일 필터링 개선
  - ☐ FilterSortBar 스택 정렬
  - ☐ 필터 버튼 더 큼
  - ☐ 슬라이더 터치 반응 좋음
- ☐ 모바일 CityGrid
  - ☐ 컬럼 최적화 (1-2 컬럼)
- ☐ 접근성 개선
  - ☐ 모든 버튼에 aria-label
  - ☐ 폼 레이블 연결
  - ☐ 색상만으로 정보 전달 안 함
  - ☐ 충분한 색상 대비
  - ☐ 키보드 네비게이션 지원
  - ☐ 포커스 표시기
- ☐ 다크 모드
  - ☐ Sidebar 배경색 조정
  - ☐ 이미지 오버레이 다크모드 지원

### 🔍 검증/확인해야 하는 기능

- ☐ 모바일 기기에서 햄버거 메뉴 정상 동작
- ☐ 모바일에서 모든 버튼과 입력 요소가 터치하기 좋음
- ☐ 필터링이 모바일에서 사용 가능
- ☐ Lighthouse 접근성 점수 90 이상
- ☐ 키보드만으로 전체 기능 이용 가능
- ☐ 스크린 리더에서 모든 내용 읽음
- ☐ 다크 모드에서 모든 색상이 읽기 좋음
- ☐ 반응형 이미지 로드 (모바일에서 작은 크기)

---

## Phase 8: 성능 최적화 & 배포 준비

### 📋 이번 단계 오버뷰
애플리케이션의 성능을 최적화하고, 프로덕션 배포를 위한 준비를 합니다. 이미지 최적화, 코드 스플리팅, 캐싱 전략을 구현합니다.

**주요 구현:**
- ☐ Next.js Image 최적화
- ☐ 코드 스플리팅 & Lazy Loading
- ☐ SEO 개선
- ☐ 환경 변수 관리
- ☐ 에러 페이지 (404, 500)

### ✅ 수정/개선해야 하는 기능

- ☐ 이미지 최적화
  - ☐ Next Image 컴포넌트 사용 확인
  - ☐ 이미지 크기 제한
  - ☐ Unsplash 이미지 CDN 활용
  - ☐ WebP 포맷 지원
- ☐ 코드 스플리팅
  - ☐ 동적 import로 모달 로드
  - ☐ 페이지 라우트 자동 분할
  - ☐ 큰 라이브러리 별도 청크
- ☐ SEO 개선
  - ☐ metadata 추가 (각 페이지)
  - ☐ Open Graph 메타 태그
  - ☐ 구조화된 데이터 (schema.json)
  - ☐ sitemap.xml 생성
  - ☐ robots.txt 생성
- ☐ 환경 변수
  - ☐ .env.example 파일 생성
  - ☐ 모든 환경 변수 문서화
- ☐ 에러 페이지
  - ☐ `/not-found.tsx` (404)
  - ☐ `/error.tsx` (500)
  - ☐ 사용자 친화적 메시지
- ☐ 로딩 상태
  - ☐ `loading.tsx` 스켈레톤 로더

### 🔍 검증/확인해야 하는 기능

- ☐ Lighthouse 성능 점수 85 이상
- ☐ First Contentful Paint (FCP) < 1.5초
- ☐ Largest Contentful Paint (LCP) < 2.5초
- ☐ 모든 페이지 메타데이터 정상 표시
- ☐ Open Graph 이미지 표시 (SNS 공유)
- ☐ 404 페이지 정상 표시
- ☐ 에러 발생 시 500 페이지 표시
- ☐ 번들 크기 < 500KB (gzip)
- ☐ 네트워크 요청 최소화

---

## Summary: 전체 일정

| Phase | 제목 | 주요 기능 | 예상 시간 |
|-------|------|---------|---------|
| 1 | 핵심 상태 관리 & 필터링 | Context, 필터, 정렬, 검색 | 4-6시간 |
| 2 | 상세 페이지 & 정보 | 동적 라우팅, 도시 상세 | 3-4시간 |
| 3 | 즐겨찾기 & 비교 | 하트 기능, 비교 테이블 | 3-4시간 |
| 4 | 리뷰 & 평가 시스템 | 리뷰 작성, 평점 | 3-4시간 |
| 5 | 고급 필터 & 검색 | 상세필터, 프리셋, 오토컴플릿 | 2-3시간 |
| 6 | 사용자 개인화 | 추천, 프로필, 조회기록 | 3-4시간 |
| 7 | 모바일 & 접근성 | 반응형, WCAG, 다크모드 | 4-5시간 |
| 8 | 성능 & 배포 | 최적화, SEO, 배포 준비 | 2-3시간 |

**전체 예상 소요시간: 24-33시간**

---

## 주요 특징

- ✅ 각 Phase는 **독립적으로 실행 가능**
- ✅ 점진적으로 프로젝트 완성
- ✅ 충분한 문맥 포함 (별도 에이전트 작업 가능)
- ✅ 모든 기능은 **가짜 데이터** 기반 (DB 연동 전)
- ✅ 기능 구현 후 명확한 검증 기준 제시
